---
layout: post
title: 用scrapy爬取多级页面以及图片
date: 2017-11-02
categories: blog
author: gafei
---

这次爬取的是天猫guitar（按销量）的信息以及图片  

爬虫程序爬取的目标通常不仅仅是文字资源，经常也会爬取图片资源。这就涉及如何高效下载图片的问题。这里高效下载指的是既能把图片完整下载到本地又不会对网站服务器造成压力。  

我们可以在 `pipeline` 中自己实现下载图片逻辑。但 `Scrapy` 提供了图片管道 `ImagesPipeline` ，方便我们操作下载图片。

### 1.确定爬取的数据
爬取的信息可以自己选择，这里我选择了`价格`，`商品名称`，`商品链接`，`店铺名`，`店铺链接`以及`图片链接`

![爬取目标](/img/20171102/1.png)
<center>
![爬取目标](/img/20171102/2.png)
</center>
<br>
其中的`价格`，`商品名称`，`商品链接`，`图片链接`可以在首页获得，而`店铺名`与`店铺链接`需要点击`商品链接`后的页面才能够获得，在确定完要爬取的数据之后，首先在创建一个新的scrapy项目
```python
scrapy startproject GuitarGoods
```
然后在项目中的```items.py```中这样编写：
```python
class GuitargoodsItem(scrapy.Item):
    GODDS_PRICE = scrapy.Field()
    GODDS_NAME = scrapy.Field()
    GOODS_URL = scrapy.Field()
    SHOP_NAME = scrapy.Field()
    SHOP_URL = scrapy.Field()
    # 图片链接
    PIC_URL = scrapy.Field()
```
## 今天写到这里，，，明天再写T T
